angular.module("angularValidator",[]),angular.module("angularValidator").directive("angularValidator",function(){return{restrict:"A",link:function(a,b,c,d){function e(a){for(var b=0;b<a.length;b++)b in a&&f(a[b])}function f(b){b.isWatchedByValidator||(b.isWatchedByValidator=!0,"validate-on"in b.attributes&&"blur"===b.attributes["validate-on"].value&&angular.element(b).on("blur",function(){j(b),n(b)}),a.$watch(function(){return b.value+b.required+q.submitted+i(b)+g(q[b.name])+h(q[b.name])},function(){if(q.submitted)j(b),n(b);else{var a="validate-on"in b.attributes&&"dirty"===b.attributes["validate-on"].value;a?(j(b),n(b)):q[b.name]&&q[b.name].$pristine&&(j(b),n(b))}}))}function g(a){return a&&"$dirty"in a?a.$dirty:void 0}function h(a){return a&&"$valid"in a?a.$valid:void 0}function i(b){if("validator"in b.attributes){var c=a.$eval(b.attributes.validator.value);return q[b.name].$setValidity("angularValidator",c),c}}function j(b){var c=function(){return"<i class='fa fa-times'></i> Required"},d=function(){return"<i class='fa fa-times'></i> Invalid"};if(b.name in q){var e=q[b.name],f=m(b);if(f&&f.remove(),e.$dirty||a[b.form.name]&&a[b.form.name].submitted)if(e.$error.required)angular.element(b).closest(".form-group").removeClass("has-error has-success").addClass("has-error").find("label.error, label.success").remove(),"required-message"in b.attributes?angular.element(b).after(k(b.attributes["required-message"].value)):angular.element(b).after(k(c));else if(e.$valid){if(e.$valid&&(angular.element(b).closest(".form-group").removeClass("has-error has-success").addClass("has-success").find("label.error, label.success").remove(),"valid-message"in b.attributes)){var g=angular.element(l(b.attributes["valid-message"].value));angular.element(b).parent().append(g)}}else if(angular.element(b).closest(".form-group").removeClass("has-error has-success").addClass("has-error").find("label.error, label.success").remove(),"invalid-message"in b.attributes){var g=angular.element(l(b.attributes["invalid-message"].value));angular.element(b).parent().append(g)}else angular.element(b).after(k(d))}}function k(b){return"<label class='control-label has-error validationMessage'>"+a.$eval(b)+"</label>"}function l(b){return"<label class='control-label success'>"+a.$eval(b)+"</label>"}function m(a){for(var b=angular.element(a).parent().children(),c=0;c<b.length;c++)if(angular.element(b[c]).hasClass("validationMessage"))return angular.element(b[c]);return!1}function n(b){if(b.name in q){var c=q[b.name];angular.element(b).removeClass("has-error"),angular.element(b.parentNode).removeClass("has-error"),(c.$dirty||a[b.form.name]&&a[b.form.name].submitted)&&c.$invalid&&(angular.element(b.parentNode).addClass("has-error"),angular.element(b).addClass("has-error"))}}var o=angular.element(b)[0],p=o.attributes.name.value,q=a[p];q.submitted=!1,a.$watch(function(){return o.length},function(){e(o)}),b.on("submit",function(b){b.preventDefault(),a.$apply(function(){q.submitted=!0}),q.$valid&&a.$apply(function(){a.$eval(o.attributes["angular-validator-submit"].value)})}),q.reset=function(){for(var a=0;a<o.length;a++)o[a].name&&(q[o[a].name].$setViewValue(""),q[o[a].name].$render());q.submitted=!1,q.$setPristine()},e(o)}}});